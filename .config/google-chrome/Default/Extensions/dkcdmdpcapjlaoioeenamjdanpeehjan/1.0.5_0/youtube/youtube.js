var LOCAL_STORAGE_KEY="demainstream",GET_ALL="get_all",SET="set",SET_ALL="set_all",RATING_GREEN="#0f7b12",RATING_RED="#7e0308",DAILY_TOP_URL="https://www.youtube.com/results?search_query=youtube&sp=CAMSBAgCEAE%253D",SEND_SUCCESS="send_success",ACTION_BLOCK_CHANNEL="action_block_channel",ACTION_UNBLOCK_CHANNEL="action_unblock_channel",browser=browser||chrome;function isObject(e){var t=typeof e;return"function"==t||"object"==t&&!!e}!function(){var e,t=document.querySelector("#search-form");t&&(e=t.querySelector("#search"));var i=[],l=[],a=!1,r=!1,n=null;function o(t){browser.runtime.sendMessage({action:GET_ALL},function(e){if(!Array.isArray(e))return!1;l=[],i=[],e.filter(function(e){return e.enabled}).forEach(function(e){e.name&&l.push(e.name.toLowerCase()),e.id&&i.push(e.id.toLowerCase())}),t&&t()})}function s(){for(var e=document.querySelectorAll("ytd-video-renderer a.yt-formatted-string.yt-simple-endpoint, yt-formatted-string.ytd-channel-name"),t=0;t<e.length;t++){var r=e[t],n=r.getAttribute("href")||r.getAttribute("title"),o=n?n.replace("/user/","").replace("/channel/","").toLowerCase():-1;if(-1<i.indexOf(o)||-1<l.indexOf(o)){var s=r.closest("ytd-video-renderer, ytd-compact-video-renderer");s&&s.remove()}}}o(),t&&t.addEventListener("submit",function(){s()},!1),e&&e.addEventListener("keyup",function(e){13===e.keyCode&&s()}),chrome.runtime.onMessage.addListener(function(e){return e.type===SEND_SUCCESS&&e.hasOwnProperty("msg")?alert(e.msg):o(function(){s()}),!0});var d,c,u=(d=window.MutationObserver||window.WebKitMutationObserver,function(e,r){e&&1!==!e.nodeType&&(d?new d(function(e){var t=e.find(function(e){return"childList"===e.type&&"contents"===e.target.id});r(t)}).observe(e,{childList:!0,subtree:!0}):window.addEventListener&&(e.addEventListener("DOMNodeInserted",r,!1),e.addEventListener("DOMNodeRemoved",r,!1)))});c=setInterval(function(){if(a||function(){if(a)return;var e=window.location.search,t=!1;"?search_query=youtube&sp=CAMSBAgCEAE%253D"===e&&(t=!0);var r=document.querySelector("div#items.style-scope.ytd-guide-section-renderer");if(!r)return;var n=document.createElement("a");n.href=DAILY_TOP_URL,n.style.setProperty("display","block"),n.style.setProperty("height","40px"),n.style.setProperty("width","100%"),n.style.setProperty("line-height","40px"),n.style.setProperty("padding","0 28px"),n.style.setProperty("cursor","pointer"),n.style.setProperty("box-sizing","border-box"),n.style.setProperty("text-decoration","none"),t&&n.style.setProperty("background-color","#d9d9d9"),n.addEventListener("mouseover",function(){n.style.setProperty("background-color","#E7E7E7")},!1),n.addEventListener("mouseout",function(){t||n.style.removeProperty("background-color")},!1);var o=document.createElement("span");o.innerHTML="Daily Popular Videos",o.style.setProperty("display","inlne-block"),o.style.setProperty("color","rgba(17,17,17,0.8)"),o.style.setProperty("font-size","14px"),o.style.setProperty("line-height","40px"),o.style.setProperty("text-decoration","none"),o.style.setProperty("vertical-align","middle"),t&&(o.style.setProperty("font-weight","500"),o.style.setProperty("color","#000"));var s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.style.setProperty("display","inlne-block"),s.style.setProperty("height","20px"),s.style.setProperty("width","20px"),s.style.setProperty("vertical-align","middle"),s.style.setProperty("margin","0 24px 0 0"),s.setAttribute("version","1.1"),s.setAttribute("xmlns","http://www.w3.org/2000/svg"),s.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),s.setAttribute("viewBox","0 0 1792 1792");var i=document.createElementNS("http://www.w3.org/2000/svg","path");i.setAttribute("d","M1920 1536v128h-2048v-1536h128v1408h1920zm-128-1248v435q0 21-19.5 29.5t-35.5-7.5l-121-121-633 633q-10 10-23 10t-23-10l-233-233-416 416-192-192 585-585q10-10 23-10t23 10l233 233 464-464-121-121q-16-16-7.5-35.5t29.5-19.5h435q14 0 23 9t9 23z"),i.setAttribute("fill","#909090"),t&&i.setAttribute("fill","#fc0d1b"),s.appendChild(i),n.appendChild(s),n.appendChild(o),r&&(r.appendChild(n),a=!0)}(),(n=document.querySelectorAll("#content.style-scope.ytd-app"))&&!r){r=!0;for(var e=0;e<n.length;e++){var t=n[e];u(t,function(e){s()})}}a&&n&&clearInterval(c),s()},100),setTimeout(function(){clearInterval(c)},1e4)}();