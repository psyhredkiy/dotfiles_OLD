var LOCAL_STORAGE_KEY="demainstream",GET_ALL="get_all",SET="set",SET_ALL="set_all",RATING_GREEN="#0f7b12",RATING_RED="#7e0308",DAILY_TOP_URL="https://www.youtube.com/results?search_query=youtube&sp=CAMSBAgCEAE%253D",SEND_SUCCESS="send_success",ACTION_BLOCK_CHANNEL="action_block_channel",ACTION_UNBLOCK_CHANNEL="action_unblock_channel",browser=browser||chrome;function isObject(e){var t=typeof e;return"function"==t||"object"==t&&!!e}var list=document.getElementById("list"),selectAllBtn=document.getElementById("select-all-btn"),deselectAllBtn=document.getElementById("deselect-all-btn"),helpBtn=document.getElementById("help-btn"),helpView=document.getElementById("help-view"),addBtn=document.getElementById("add-btn"),addView=document.getElementById("add-view"),addViewChannelIdInput=document.getElementById("add-view-channel-id-input"),addViewChannelNameInput=document.getElementById("add-view-channel-name-input"),addViewTextarea=document.getElementById("add-view-textarea"),addViewSubmitBtn=document.getElementById("add-view-submit-btn"),listItemCheckboxes=[];function makeList(e){if(!Array.isArray(e))return!1;for(var t=0;t<e.length;t++){var n=makeListItem(e[t]);list.appendChild(n)}}function makeListItem(e){var t=document.createElement("li");t.className="list-item";var n=document.createElement("input");n.className="list-item__checkbox",n.setAttribute("type","checkbox"),n.setAttribute("id",e.id),n.setAttribute("name",e.name),listItemCheckboxes.push(n),n.addEventListener("change",function(){saveSetting(this.id,this.checked)},!1),n.checked=e.enabled;var a=document.createElement("label");a.className="list-item__block",a.setAttribute("for",e.id);var d=document.createElement("img");d.className="list-item__icon",d.src=e.icon;var i=document.createElement("span");return i.className="list-item__text",i.innerText=e.name||e.id,a.appendChild(d),a.appendChild(i),t.appendChild(n),t.appendChild(a),t}function saveSetting(e,t){browser.runtime.sendMessage({action:SET,channelId:e,enabled:t})}function setAllEnabled(e){browser.runtime.sendMessage({action:SET_ALL,enabled:e});for(var t=0;t<listItemCheckboxes.length;t++){listItemCheckboxes[t].checked=e}}browser.runtime.sendMessage({action:GET_ALL},function(e){if(!Array.isArray(e))return!1;makeList(e)}),selectAllBtn.addEventListener("click",function(){setAllEnabled(!0)},!1),deselectAllBtn.addEventListener("click",function(){setAllEnabled(!1)},!1),helpBtn.addEventListener("click",function(){helpView.classList.contains("hidden")?(list.classList.add("hidden"),addView.classList.add("hidden")):list.classList.remove("hidden"),helpView.classList.toggle("hidden")},!1),addBtn.addEventListener("click",function(){addView.classList.contains("hidden")?(list.classList.add("hidden"),helpView.classList.add("hidden")):list.classList.remove("hidden"),addView.classList.toggle("hidden")},!1),addViewSubmitBtn.addEventListener("click",function(){var e=!1,t=addViewTextarea.value;if(t){e=!0;for(var n=t.split(","),a=0;a<n.length;a++){var d=n[a];d&&browser.runtime.sendMessage({action:SET,channelId:d,channelName:"",enabled:!0})}}(addViewChannelIdInput.value||addViewChannelNameInput.value)&&(e=!0,browser.runtime.sendMessage({action:SET,channelId:addViewChannelIdInput.value,channelName:addViewChannelNameInput.value,enabled:!0})),addViewChannelIdInput.value="",addViewChannelNameInput.value="",addViewTextarea.value="",e&&browser.runtime.sendMessage({action:SEND_SUCCESS,msg:"Successfully added block(s)"})});